{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sah0365\\\\Documents\\\\\\xE9cole\\\\watermelon-front\\\\src\\\\registerUser.js\";\nimport { BrowserRouter, Route, Link, Redirect } from 'react-router-dom';\nimport React, { Component } from 'react';\nimport { MDBBtn, MDBContainer } from 'mdbreact';\nimport Nav_Bar from './Nav_bar/nav_bar.js';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let result = fetch(\"http://localhost:8000/v1/users\", {\n        method: 'POST',\n        body: JSON.stringify({\n          \"first_name\": this.state.first_name,\n          \"last_name\": this.state.last_name,\n          \"email\": this.state.email,\n          \"password\": this.state.password,\n          \"is_admin\": false\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        response.json().then(value => {\n          if (response.status === 200) {\n            let access_token = response.access_token;\n            console.log(access_token);\n            localStorage.setItem('access_token', value.access_token);\n            this.setState({\n              checkConnection: true,\n              firsttoken: access_token\n            });\n          }\n        });\n      });\n    };\n\n    this.state = {\n      last_name: '',\n      first_name: '',\n      email: '',\n      password: '',\n      checkConnection: false,\n      firsttoken: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePwd = this.handleChangePwd.bind(this);\n    this.handleChangeFirst = this.handleChangeFirst.bind(this);\n    this.handleChangeLast = this.handleChangeLast.bind(this);\n  }\n\n  componentWillUnmount() {}\n\n  handleChange(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  handleChangePwd(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  handleChangeFirst(event) {\n    this.setState({\n      first_name: event.target.value\n    });\n  }\n\n  handleChangeLast(event) {\n    this.setState({\n      last_name: event.target.value\n    });\n  }\n\n  // handleSubmit(event) {\n  //   event.preventDefault();\n  //   this.log();\n  // }\n  // log() {\n  //   const url = \"http://localhost:8000/v1/login/\";\n  //     //const response = await fetch(url, { method: 'POST', body: JSON.stringify({ email: \"good@mail.com\", password: \"correct\" }) });\n  //     fetch(url, { method: 'POST', \n  //     body: JSON.stringify({ \"email\": this.state.login, \n  //     \"password\": this.state.password }), \n  //     headers: { 'Content-Type': 'application/json'} }).then((response) => {\n  //       return response.json();\n  //     })\n  //       .then((json) => {\n  //         console.log(JSON.stringify(json));\n  //       });\n  // }\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"starter-template\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Bootstrap starter template\"), React.createElement(\"p\", {\n      class: \"lead\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Use this document as a way to quickly start any new project. All you get is this text and a mostly barebones HTML document.\")));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/sah0365/Documents/Ã©cole/watermelon-front/src/registerUser.js"],"names":["BrowserRouter","Route","Link","Redirect","React","Component","MDBBtn","MDBContainer","Nav_Bar","Login","constructor","props","handleSubmit","e","preventDefault","result","fetch","method","body","JSON","stringify","state","first_name","last_name","email","password","headers","then","response","json","value","status","access_token","console","log","localStorage","setItem","setState","checkConnection","firsttoken","handleChange","bind","handleChangePwd","handleChangeFirst","handleChangeLast","componentWillUnmount","event","target","render"],"mappings":";AAAA,SAASA,aAAT,EAAwBC,KAAxB,EAA+BC,IAA/B,EAAqCC,QAArC,QAAqD,kBAArD;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,YAAjB,QAAqC,UAArC;AAGA,OAAOC,OAAP,MAAoB,sBAApB;;AAIA,MAAMC,KAAN,SAAoBJ,SAApB,CAA8B;AAC5BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAEjB,UAAMA,KAAN;;AAFiB,SA+CnBC,YA/CmB,GA+CHC,CAAD,IAAM;AACnBA,MAAAA,CAAC,CAACC,cAAF;AACA,UAAIC,MAAM,GAAGC,KAAK,CAAC,gCAAD,EAAmC;AACjDC,QAAAA,MAAM,EAAE,MADyC;AAEjDC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAE,wBAAc,KAAKC,KAAL,CAAWC,UAA3B;AACrB,uBAAc,KAAKD,KAAL,CAAWE,SADJ;AAErB,mBAAU,KAAKF,KAAL,CAAWG,KAFA;AAGrB,sBAAY,KAAKH,KAAL,CAAWI,QAHF;AAIrB,sBAAY;AAJS,SAAf,CAF2C;AAOjDC,QAAAA,OAAO,EAAE;AACL,0BAAgB;AADX;AAPwC,OAAnC,CAAL,CAWVC,IAXU,CAWLC,QAAQ,IAAI;AACZA,QAAAA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqBG,KAAK,IAAG;AAEnB,cAAIF,QAAQ,CAACG,MAAT,KAAkB,GAAtB,EACA;AACE,gBAAIC,YAAY,GAACJ,QAAQ,CAACI,YAA1B;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAYF,YAAZ;AACAG,YAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCN,KAAK,CAACE,YAA3C;AACd,iBAAKK,QAAL,CAAc;AACZC,cAAAA,eAAe,EAAG,IADN;AAEZC,cAAAA,UAAU,EAAGP;AAFD,aAAd;AAGG;AACQ,SAXT;AAYH,OAxBQ,CAAb;AAyBH,KA1EoB;;AAGjB,SAAKX,KAAL,GAAa;AACTE,MAAAA,SAAS,EAAG,EADH;AAETD,MAAAA,UAAU,EAAG,EAFJ;AAGTE,MAAAA,KAAK,EAAG,EAHC;AAITC,MAAAA,QAAQ,EAAG,EAJF;AAKTa,MAAAA,eAAe,EAAG,KALT;AAMTC,MAAAA,UAAU,EAAG;AANJ,KAAb;AAQA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKE,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBF,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKG,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAAxB;AAID;;AACDI,EAAAA,oBAAoB,GAAG,CAGtB;;AAEDL,EAAAA,YAAY,CAACM,KAAD,EAAO;AACjB,SAAKT,QAAL,CAAc;AACZb,MAAAA,KAAK,EAAGsB,KAAK,CAACC,MAAN,CAAajB;AADT,KAAd;AAGD;;AAEDY,EAAAA,eAAe,CAACI,KAAD,EAAO;AACpB,SAAKT,QAAL,CAAc;AACZZ,MAAAA,QAAQ,EAAGqB,KAAK,CAACC,MAAN,CAAajB;AADZ,KAAd;AAGD;;AACDa,EAAAA,iBAAiB,CAACG,KAAD,EAAO;AACtB,SAAKT,QAAL,CAAc;AACZf,MAAAA,UAAU,EAAGwB,KAAK,CAACC,MAAN,CAAajB;AADd,KAAd;AAGD;;AAEDc,EAAAA,gBAAgB,CAACE,KAAD,EAAO;AACrB,SAAKT,QAAL,CAAc;AACZd,MAAAA,SAAS,EAAGuB,KAAK,CAACC,MAAN,CAAajB;AADb,KAAd;AAGD;;AA8BD;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACAkB,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAC,kBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADF,EAEE;AAAG,MAAA,KAAK,EAAC,MAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qIAFF,CADF,CADF;AAWD;;AA5G2B;;AA8G9B,eAAevC,KAAf","sourcesContent":["import { BrowserRouter, Route, Link, Redirect } from 'react-router-dom';\r\nimport React, { Component } from 'react';\r\nimport { MDBBtn, MDBContainer } from 'mdbreact';\r\n\r\n\r\nimport Nav_Bar from './Nav_bar/nav_bar.js';\r\n\r\n\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n\r\n    super(props);\r\n    this.state = {\r\n        last_name : '',\r\n        first_name : '',\r\n        email : '',\r\n        password : '',\r\n        checkConnection : false,\r\n        firsttoken : ''\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleChangePwd = this.handleChangePwd.bind(this);\r\n    this.handleChangeFirst = this.handleChangeFirst.bind(this);\r\n    this.handleChangeLast = this.handleChangeLast.bind(this);\r\n\r\n\r\n\r\n  }\r\n  componentWillUnmount() {\r\n\r\n\r\n  }\r\n\r\n  handleChange(event){\r\n    this.setState({\r\n      email : event.target.value\r\n    });\r\n  }\r\n\r\n  handleChangePwd(event){\r\n    this.setState({\r\n      password : event.target.value\r\n    });\r\n  }\r\n  handleChangeFirst(event){\r\n    this.setState({\r\n      first_name : event.target.value\r\n    });\r\n  }\r\n\r\n  handleChangeLast(event){\r\n    this.setState({\r\n      last_name : event.target.value\r\n    });\r\n  }\r\n\r\n  handleSubmit = (e)=> {   \r\n    e.preventDefault();\r\n    let result = fetch(\"http://localhost:8000/v1/users\", {\r\n        method: 'POST',\r\n        body: JSON.stringify({ \"first_name\": this.state.first_name, \r\n        \"last_name\":  this.state.last_name,\r\n        \"email\":  this.state.email, \r\n        \"password\": this.state.password, \r\n        \"is_admin\": false }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n      .then(response => {\r\n            response.json().then(value =>{\r\n\r\n                      if (response.status===200)\r\n                      {\r\n                        let access_token=response.access_token;\r\n                        console.log(access_token);\r\n                        localStorage.setItem('access_token', value.access_token);\r\n          this.setState({\r\n            checkConnection : true,\r\n            firsttoken : access_token\r\n          })}\r\n                    });\r\n        });\r\n}\r\n  // handleSubmit(event) {\r\n  //   event.preventDefault();\r\n  //   this.log();\r\n  // }\r\n\r\n  // log() {\r\n  //   const url = \"http://localhost:8000/v1/login/\";\r\n  //     //const response = await fetch(url, { method: 'POST', body: JSON.stringify({ email: \"good@mail.com\", password: \"correct\" }) });\r\n  //     fetch(url, { method: 'POST', \r\n  //     body: JSON.stringify({ \"email\": this.state.login, \r\n  //     \"password\": this.state.password }), \r\n  //     headers: { 'Content-Type': 'application/json'} }).then((response) => {\r\n  //       return response.json();\r\n  //     })\r\n  //       .then((json) => {\r\n  //         console.log(JSON.stringify(json));\r\n  //       });\r\n    \r\n\r\n  // }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div class=\"starter-template\">\r\n          <h1>Bootstrap starter template</h1>\r\n          <p class=\"lead\">\r\n            Use this document as a way to quickly start any new project. All you\r\n            get is this text and a mostly barebones HTML document.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}