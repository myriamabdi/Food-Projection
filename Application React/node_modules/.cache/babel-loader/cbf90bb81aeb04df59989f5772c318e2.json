{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sah0365\\\\Documents\\\\\\xE9cole\\\\watermelon-front\\\\src\\\\registerUser.js\";\nimport { BrowserRouter, Route, Link, Redirect } from 'react-router-dom';\nimport React, { Component } from 'react';\nimport { MDBBtn, MDBContainer } from 'mdbreact';\nimport Nav_Bar from './Nav_bar/nav_bar.js';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let result = fetch(\"http://localhost:8000/v1/users\", {\n        method: 'POST',\n        body: JSON.stringify({\n          \"first_name\": this.state.first_name,\n          \"last_name\": this.state.last_name,\n          \"email\": this.state.email,\n          \"password\": this.state.password,\n          \"is_admin\": false\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        response.json().then(value => {\n          if (response.status === 200) {\n            let access_token = response.access_token;\n            console.log(access_token);\n            localStorage.setItem('access_token', value.access_token);\n            this.setState({\n              checkConnection: true,\n              firsttoken: access_token\n            });\n          }\n        });\n      });\n    };\n\n    this.state = {\n      last_name: '',\n      first_name: '',\n      email: '',\n      password: '',\n      checkConnection: false,\n      firsttoken: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePwd = this.handleChangePwd.bind(this);\n    this.handleChangeFirst = this.handleChangeFirst.bind(this);\n    this.handleChangeLast = this.handleChangeLast.bind(this);\n  }\n\n  componentWillUnmount() {}\n\n  handleChange(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  handleChangePwd(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  handleChangeFirst(event) {\n    this.setState({\n      first_name: event.target.value\n    });\n  }\n\n  handleChangeLast(event) {\n    this.setState({\n      last_name: event.target.value\n    });\n  }\n\n  // handleSubmit(event) {\n  //   event.preventDefault();\n  //   this.log();\n  // }\n  // log() {\n  //   const url = \"http://localhost:8000/v1/login/\";\n  //     //const response = await fetch(url, { method: 'POST', body: JSON.stringify({ email: \"good@mail.com\", password: \"correct\" }) });\n  //     fetch(url, { method: 'POST', \n  //     body: JSON.stringify({ \"email\": this.state.login, \n  //     \"password\": this.state.password }), \n  //     headers: { 'Content-Type': 'application/json'} }).then((response) => {\n  //       return response.json();\n  //     })\n  //       .then((json) => {\n  //         console.log(JSON.stringify(json));\n  //       });\n  // }\n  render() {\n    return React.createElement(\"div\", {\n      className: \"Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(MDBContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"h5 text-center mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Subscription\"), React.createElement(\"label\", {\n      for: \"firstName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"firstName :\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"firstName\",\n      className: \"form-control\",\n      name: \"firstName\",\n      onChange: this.handleChangeFirst,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"LastName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"last tName :\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"lastName\",\n      className: \"form-control\",\n      name: \"lastName\",\n      onChange: this.handleChangeLast,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Email :\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"mail\",\n      className: \"form-control\",\n      name: \"user_mail\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"password:\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"mdp\",\n      className: \"form-control\",\n      name: \"user_mdp\",\n      onChange: this.handleChangePwd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(MDBBtn, {\n      type: \"submit\",\n      token: this.state.token,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Connexion\"))), this.state.checkConnection ? React.createElement(Redirect, {\n      to: \"/nav_Bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }) : console.log(\"fail\")));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/sah0365/Documents/Ã©cole/watermelon-front/src/registerUser.js"],"names":["BrowserRouter","Route","Link","Redirect","React","Component","MDBBtn","MDBContainer","Nav_Bar","Login","constructor","props","handleSubmit","e","preventDefault","result","fetch","method","body","JSON","stringify","state","first_name","last_name","email","password","headers","then","response","json","value","status","access_token","console","log","localStorage","setItem","setState","checkConnection","firsttoken","handleChange","bind","handleChangePwd","handleChangeFirst","handleChangeLast","componentWillUnmount","event","target","render","token"],"mappings":"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","sourcesContent":["import { BrowserRouter, Route, Link, Redirect } from 'react-router-dom';\r\nimport React, { Component } from 'react';\r\nimport { MDBBtn, MDBContainer } from 'mdbreact';\r\n\r\n\r\nimport Nav_Bar from './Nav_bar/nav_bar.js';\r\n\r\n\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n\r\n    super(props);\r\n    this.state = {\r\n        last_name : '',\r\n        first_name : '',\r\n        email : '',\r\n        password : '',\r\n        checkConnection : false,\r\n        firsttoken : ''\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleChangePwd = this.handleChangePwd.bind(this);\r\n    this.handleChangeFirst = this.handleChangeFirst.bind(this);\r\n    this.handleChangeLast = this.handleChangeLast.bind(this);\r\n\r\n\r\n\r\n  }\r\n  componentWillUnmount() {\r\n\r\n\r\n  }\r\n\r\n  handleChange(event){\r\n    this.setState({\r\n      email : event.target.value\r\n    });\r\n  }\r\n\r\n  handleChangePwd(event){\r\n    this.setState({\r\n      password : event.target.value\r\n    });\r\n  }\r\n  handleChangeFirst(event){\r\n    this.setState({\r\n      first_name : event.target.value\r\n    });\r\n  }\r\n\r\n  handleChangeLast(event){\r\n    this.setState({\r\n      last_name : event.target.value\r\n    });\r\n  }\r\n\r\n  handleSubmit = (e)=> {   \r\n    e.preventDefault();\r\n    let result = fetch(\"http://localhost:8000/v1/users\", {\r\n        method: 'POST',\r\n        body: JSON.stringify({ \"first_name\": this.state.first_name, \r\n        \"last_name\":  this.state.last_name,\r\n        \"email\":  this.state.email, \r\n        \"password\": this.state.password, \r\n        \"is_admin\": false }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n      .then(response => {\r\n            response.json().then(value =>{\r\n\r\n                      if (response.status===200)\r\n                      {\r\n                        let access_token=response.access_token;\r\n                        console.log(access_token);\r\n                        localStorage.setItem('access_token', value.access_token);\r\n          this.setState({\r\n            checkConnection : true,\r\n            firsttoken : access_token\r\n          })}\r\n                    });\r\n        });\r\n}\r\n  // handleSubmit(event) {\r\n  //   event.preventDefault();\r\n  //   this.log();\r\n  // }\r\n\r\n  // log() {\r\n  //   const url = \"http://localhost:8000/v1/login/\";\r\n  //     //const response = await fetch(url, { method: 'POST', body: JSON.stringify({ email: \"good@mail.com\", password: \"correct\" }) });\r\n  //     fetch(url, { method: 'POST', \r\n  //     body: JSON.stringify({ \"email\": this.state.login, \r\n  //     \"password\": this.state.password }), \r\n  //     headers: { 'Content-Type': 'application/json'} }).then((response) => {\r\n  //       return response.json();\r\n  //     })\r\n  //       .then((json) => {\r\n  //         console.log(JSON.stringify(json));\r\n  //       });\r\n    \r\n\r\n  // }\r\n  render() {\r\n    return (\r\n      <div className=\"Login\">\r\n        <MDBContainer>\r\n          <div>\r\n            <form onSubmit={this.handleSubmit}>\r\n            <p className=\"h5 text-center mb-4\">Subscription</p>\r\n            <label for=\"firstName\">firstName :</label>\r\n              <input type=\"text\" id=\"firstName\" className=\"form-control\" name=\"firstName\" onChange={this.handleChangeFirst}></input>\r\n              <label for=\"LastName\">last tName :</label>\r\n              <input type=\"text\" id=\"lastName\" className=\"form-control\" name=\"lastName\" onChange={this.handleChangeLast}></input>\r\n              <label for=\"email\">Email :</label>\r\n              <input type=\"text\" id=\"mail\" className=\"form-control\" name=\"user_mail\" onChange={this.handleChange}></input>\r\n              <label for=\"password\">password:</label>\r\n              <input type=\"text\" id=\"mdp\" className=\"form-control\" name=\"user_mdp\" onChange={this.handleChangePwd}></input>\r\n\r\n              <MDBBtn type=\"submit\" token={this.state.token}>Connexion</MDBBtn>\r\n\r\n\r\n            </form>\r\n          </div>\r\n\r\n      \r\n          {this.state.checkConnection ? <Redirect to= '/nav_Bar'/> : console.log(\"fail\")}\r\n          </MDBContainer>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}