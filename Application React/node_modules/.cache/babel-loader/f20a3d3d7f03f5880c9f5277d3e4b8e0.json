{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sah0365\\\\Documents\\\\\\xE9cole\\\\watermelon-front\\\\src\\\\login.js\";\nimport { BrowserRouter, Route, Link, Redirect } from 'react-router-dom';\nimport React, { Component } from 'react';\nimport { MDBBtn, MDBInput, MDBContainer } from 'mdbreact';\nimport { withRouter } from 'react-router-dom';\nimport Nav_Bar from './Nav_bar/nav_bar.js';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let result = fetch(\"http://localhost:8000/v1/login\", {\n        method: 'POST',\n        body: JSON.stringify({\n          \"email\": this.state.email,\n          \"password\": this.state.password\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        response.json().then(value => {\n          if (response.status === 200) {\n            let access_token = response.access_token;\n            localStorage.setItem('access_token', value.access_token);\n            console.log(localStorage.getItem('access_token'));\n            this.setState({\n              checkConnection: true,\n              firsttoken: access_token\n            });\n          }\n        });\n      });\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      checkConnection: false,\n      firsttoken: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePwd = this.handleChangePwd.bind(this);\n  }\n\n  componentWillUnmount() {}\n\n  handleChange(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n\n  handleChangePwd(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"Login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(MDBContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"h5 text-center mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"div\", {\n      className: \"grey-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      for: \"email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Email :\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"mail\",\n      className: \"form-control\",\n      name: \"user_mail\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"password:\"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"mdp\",\n      className: \"form-control\",\n      name: \"user_mdp\",\n      onChange: this.handleChangePwd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(MDBBtn, {\n      type: \"submit\",\n      token: this.state.token,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Connexion\")))), this.state.checkConnection ? React.createElement(Redirect, {\n      to: \"/nav_Bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }) : console.log(\"fail\")));\n  }\n\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["C:/Users/sah0365/Documents/Ã©cole/watermelon-front/src/login.js"],"names":["BrowserRouter","Route","Link","Redirect","React","Component","MDBBtn","MDBInput","MDBContainer","withRouter","Nav_Bar","Login","constructor","props","handleSubmit","e","preventDefault","result","fetch","method","body","JSON","stringify","state","email","password","headers","then","response","json","value","status","access_token","localStorage","setItem","console","log","getItem","setState","checkConnection","firsttoken","handleChange","bind","handleChangePwd","componentWillUnmount","event","target","render","token"],"mappings":"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","sourcesContent":["import { BrowserRouter, Route, Link, Redirect } from 'react-router-dom';\r\nimport React, { Component } from 'react';\r\nimport { MDBBtn, MDBInput, MDBContainer } from 'mdbreact';\r\n\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nimport Nav_Bar from './Nav_bar/nav_bar.js';\r\n\r\n\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n\r\n    super(props);\r\n    this.state = {\r\n      email : '',\r\n      password : '',\r\n      checkConnection : false,\r\n      firsttoken : ''\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleChangePwd = this.handleChangePwd.bind(this);\r\n\r\n\r\n\r\n  }\r\n  componentWillUnmount() {\r\n\r\n\r\n  }\r\n\r\n  handleChange(event){\r\n    this.setState({\r\n      email : event.target.value\r\n    });\r\n  }\r\n\r\n  handleChangePwd(event){\r\n    this.setState({\r\n      password : event.target.value\r\n    });\r\n  }\r\n\r\n\r\n  handleSubmit = (e)=> {   \r\n    e.preventDefault();\r\n    let result = fetch(\"http://localhost:8000/v1/login\", {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n            \"email\": this.state.email,\r\n            \"password\": this.state.password,\r\n        }),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n    .then(response => {\r\n      response.json().then(value =>{\r\n\r\n                if (response.status===200)\r\n                {\r\n                  let access_token=response.access_token;\r\n                  localStorage.setItem('access_token', value.access_token);\r\n                  console.log(localStorage.getItem('access_token'));\r\n                 \r\n    this.setState({\r\n      checkConnection : true,\r\n      firsttoken : access_token\r\n    })}\r\n              });\r\n  });}\r\n   \r\n \r\n       \r\n  \r\n\r\n \r\n  render() {\r\n    return (\r\n      <div className=\"Login\">\r\n        <MDBContainer>\r\n          <div>\r\n            <form onSubmit={this.handleSubmit}>\r\n            <p className=\"h5 text-center mb-4\">Login</p>\r\n            <div className=\"grey-text\">\r\n           \r\n              <label for=\"email\">Email :</label>\r\n              <input type=\"text\" id=\"mail\" \r\n              className=\"form-control\" name=\"user_mail\" onChange={this.handleChange}></input>\r\n              <label for=\"password\">password:</label>\r\n              <input type=\"text\" id=\"mdp\" className=\"form-control\" name=\"user_mdp\" onChange={this.handleChangePwd}></input>\r\n\r\n              <MDBBtn type=\"submit\" token={this.state.token}>Connexion</MDBBtn>\r\n\r\n              </div>\r\n            </form>\r\n          </div>\r\n\r\n      \r\n          {this.state.checkConnection ? <Redirect to= '/nav_Bar'/> : console.log(\"fail\")}\r\n          </MDBContainer>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\nexport default withRouter (Login);"]},"metadata":{},"sourceType":"module"}